#include <Servo.h>

Servo servoCap;
Servo servoJosStanga;
Servo servoJosDreapta;
Servo servoSusStanga;
Servo servoSusDreapta;
int const potpin = A0;
int potval;

void setup() 
{
  servoCap.attach(6);
  servoJosStanga.attach(2);
  servoJosDreapta.attach(3);
  servoSusStanga.attach(4);
  servoSusDreapta.attach(5);
  Serial.begin(9600);
}

void loop()
{
  potval = analogRead(potpin);
  Serial.print("potval: ");
  Serial.println(potval);

  // Map the potentiometer value to a suitable delay time for oscillation speed
  int delayTime = map(potval, 0, 1023, 5, 150); // Adjust these values for desired speed range

  // Move from center (90 degrees) to left (45 degrees)
  for (int angle = 90; angle >= 45; angle -= 7) {
    servoCap.write(angle);
    servoJosStanga.write(angle);
    servoJosDreapta.write(angle);
    servoSusStanga.write(angle);
    servoSusDreapta.write(angle);
    delay(delayTime); // Delay based on potentiometer value
  }

  // Ensure the servo returns to the center (90 degrees)
  servoCap.write(90);
  servoJosStanga.write(90);
  servoJosDreapta.write(90);
  servoSusStanga.write(90);
  servoSusDreapta.write(90);
  delay(500); // Pause at the center

  // Move from center (90 degrees) to right (135 degrees)
  for (int angle = 110; angle <= 135; angle += 4) {
    servoCap.write(angle);
    servoJosStanga.write(angle);
    servoJosDreapta.write(angle);
    servoSusStanga.write(angle);
    servoSusDreapta.write(angle);
    delay(delayTime); // Delay based on potentiometer value
  }

  // Ensure the servo returns to the center (90 degrees)
  servoCap.write(90);
  servoJosStanga.write(90);
  servoJosDreapta.write(90);
  servoSusStanga.write(90);
  servoSusDreapta.write(90);
  delay(500); // Pause at the center
}
